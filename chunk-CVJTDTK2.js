import{F as h,J as d,O as u,d as a,e as m,r as c,ub as p}from"./chunk-FN3OIQYH.js";var f="system";function i(t){return t==="SessionStorage"?sessionStorage:localStorage}function l(t,e){let r=i(e?.api||"LocalStorage").getItem(t.toString());return r?JSON.parse(r):null}function g(t,e,o){if(e==null)return;i(o?.api||"LocalStorage").setItem(t,JSON.stringify(e))}function y(t,e){i(e?.api||"LocalStorage").removeItem(t)}function T(t){i(t?.api||"LocalStorage").clear()}var n={getItem:l,setItem:g,removeItem:y,clear:T};var j=(()=>{let e=class{constructor(){this.currentTheme$=new m(this._storedTheme),this._document=u(p),this._destroy$=new a,this._mediaQuery=window.matchMedia("(prefers-color-scheme: dark)")}get currentTheme(){return this.currentTheme$.getValue()}get systemTheme(){return this._mediaQuery.matches?"dark":"light"}get _storedTheme(){return n.getItem("appTheme")}set _storedTheme(r){n.setItem("appTheme",r)}ngOnDestroy(){this._destroy$.complete(),this._destroy$.unsubscribe()}init(){this.setTheme(this._storedTheme||f),this._listenForMediaQueryChanges()}setTheme(r){this._clearThemes(),this._storedTheme=r;let s=r;this.currentTheme$.next(s),r==="system"&&(s=this.systemTheme),this._document.body.classList.add(s)}_listenForMediaQueryChanges(){c(this._mediaQuery.addListener.bind(this._mediaQuery),this._mediaQuery.removeListener.bind(this._mediaQuery)).pipe(h(this._destroy$)).subscribe(()=>{this._storedTheme==="system"&&this.setTheme("system")})}_clearThemes(){this._document.body.classList.remove("system","light","dark")}},t=e;return(()=>{e.\u0275fac=function(s){return new(s||e)}})(),(()=>{e.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})})(),t})();export{n as a,j as b};
